<!-- Mermaid (renders ```mermaid code fences) -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>mermaid.initialize({ startOnLoad: true });</script>

<style>
    /* Kill Pandoc's narrow body; center and widen content */
    :root {
        --max: 960px;
        --pad: clamp(16px, 4vw, 40px);
        --toc-w: 280px;
        --accent: #111827; /* slate-900-ish */
        --muted: #6b7280;  /* slate-500-ish */
        --br: 10px;
    }

    html { scroll-behavior: smooth; }

    /* Override defaults from Pandoc's built-in stylesheet */
    body {
        max-width: none !important;
        padding: 0 !important;
        margin: 0 !important;
        color: rgb(75 85 99);;
        background: rgb(249, 250, 251) !important;
        font: 16px/1.65 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    }

    /* Centered readable column */
    main, .page, body > *:not(style):not(script):not(header) {
        box-sizing: border-box;
        max-width: var(--max);
        margin: 0 auto !important;
        padding: 80px var(--pad) 180px var(--pad);
    }
    @media (max-width: 1024px) {
        main, .page, body > *:not(style):not(script):not(header) {
            padding: 40px var(--pad) 90px var(--pad);
        }
    }
    @media (max-width: 730px) {
        main, .page, body > *:not(style):not(script):not(header) {
            padding: 20px var(--pad) 45px var(--pad);
        }
    }




    .wrap { display: grid; grid-template-columns: 320px 1fr; gap: 24px; max-width: 1200px; margin: 0 auto; }
    aside { position: sticky; top: 12px; align-self: start; background: transparent; color: #000; padding: 6px 0; }
    @media (max-width: 1024px){ .wrap { grid-template-columns: 1fr } aside { position: static } }
    /* Left guideline like your screenshot */
    aside::before {
        content: ""; position: absolute; left: 0; top: 0; bottom: 0; width: 2px; background: #111;
        transform: translateX(-10px);
    }

    /* ============= Title ============= */
    .toc-title {
        font-weight: 700; font-size: 14px; margin: 0 0 6px 0; padding-left: 0;
        white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    }

    /* ============= List ============= */
    #toc, #toc ul { list-style: none; margin: 0; padding: 0; }
    .lvl1 { margin: 6px 0; }
    .lvl1 > a {
        font-weight: 700; text-decoration: none; color: inherit; display: block; padding: 2px 0;
        white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    }
    /* H2 rows are clickable summaries; start collapsed (no h3 visible) */
    details.toc-h2 { margin: 0; }
    details.toc-h2 > summary {
        list-style: none; cursor: pointer; padding: 2px 0 2px 16px; /* indent */
        outline: none;
    }
    details.toc-h2 > summary a {
        text-decoration: none; color: inherit; display: inline-block; max-width: 100%;
        white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    }
    /* H3 links (smaller, lighter) */
    .h3-list a {
        display: block; padding: 2px 0 2px 32px; text-decoration: none; color: #111; opacity: .7;
        white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 12px;
    }

    /* ============= Helpers (links, not buttons) ============= */
    .helpers { margin-top: 10px; display: grid; gap: 4px; font-size: 12px; }
    .helpers a, .helpers button.linky {
        appearance: none; border: 0; background: none; padding: 0; text-align: left;
        color: #000; cursor: pointer; text-decoration: none;
    }

    /* Hide default disclosure marker on <summary> */
    #toc summary::-webkit-details-marker { display: none; }
    #toc summary::marker { content: ""; }

    /* Keep keyboard focus visible */
    #toc summary:focus-visible { outline: 2px solid #000; outline-offset: 2px; }





    /* Elements */
    img { max-width: 100%; height: auto; }
    pre, code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; }
    pre { padding: .8rem; border: 1px solid #e5e7eb; border-radius: 8px; overflow: auto; background: #fafafa; }
    hr { border: 0; border-top: 1px solid #e5e7eb; background-color:transparent; margin: 2rem 0; }
    blockquote { border-left: 4px solid #e5e7eb; margin: 1rem 0; padding: .5rem 1rem; color: #6b7280; background: #fafafa; }

    /* Headings & lists spacing */
    h1,h2,h3 { line-height: 1.25; }
    h1,h2 { color: rgb(230 64 64);}
    h2, h3 {
        /*font-size: 1.125rem; line-height: 1.75rem;*/
    }
     h3 {
        font-size: 1.125rem; line-height: 1.75rem;
    }
    h1 { margin: 0 0 1rem; }
    h2,h3 { margin: 2rem 0 1rem; }
    ul,ol { padding-left: 1.4rem; margin: .75rem 0 1rem; }
</style>
